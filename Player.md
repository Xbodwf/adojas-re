# 播放器制作指南
编辑器拥有预览谱面的功能，此功能的实现不再赘述。
点击编辑器的播放按钮开始播放。(空格键尚可)

## 播放状态
游戏在编辑器界面有这几个状态：预览和播放，还有一个状态是暂停。

Preview(Edit),Play,Pause

## 进程
在ADOFAI中，球在轨道上移动，从索引为0的轨道开始，到任意一个球踩上最后一个轨道之间的进程称为游戏进程。
球踩上最后一个轨道即为游戏结束。

轨道=砖块=Floor=Tile=Track
## 开始播放
当播放状态变为开始时，首先播放按钮隐藏，谱面预览区变为全屏(点击右上角的暂停按钮或者Esc可退回到编辑/预览状态)


先设一个变量curTile=0
然后在第0个(索引以0开始)砖块上产生一个红球(记作planetR)，第1个砖块上产生一个蓝球(planetB)。蓝球以红球的位置为旋转中心旋转，速度是 每秒(adofaiFile.settings.bpm)/120圈。
首先蓝球需要先围绕红球匀速顺时针旋转(adofaiFile.settings.countdownTicks)圈，需要根据adofaiFile.settings.offset(单位为毫秒)和bpm适当添加圈数。
圈数必须是整数。
等待设定的圈数旋转完，因为圈数是整数的原因，蓝球一定旋转了360的倍数度，蓝球一定会重新落回第1个砖块。此时我们将curTile+=1
此时更换旋转中心为蓝球，红球从第0个砖块位置开始，以蓝球(蓝球位置不变！)为旋转中心顺时针旋转到第2个砖块位置停下。(请使用tile.angle来判定)，curTile+=1

此时红球重新成为旋转中心，蓝球从刚刚它自己的位置(砖块1)为出发点，以红球(砖块2所在，红球位置不变！)为旋转中心旋转到第3个砖块。cutTile+=1

除了0到1比较特殊，后面的逻辑都是一样的。
球相互交替旋转中心。curTile++

如果球抵达最后一个砖块，那么抵达砖块的那个球成为旋转中心，另一个球绕着它无限周期旋转。

注意：球旋转时是围绕旋转中心来旋转的，如果旋转中心在砖块上，那么如果砖块位置变动，旋转中心和球要跟着一起变


## 旋转机制
球默认的旋转方向是顺时针。
那么如果踩到带有旋转(Twirl)事件(请使用adofai库的函数获取事件，详细用法请查看node modules里的d.ts)的砖块，那么接下来球的旋转方向将改变。顺变逆或者逆变顺。
虽然方向改变了，但是这样刚好是正确的。因为adofai库算出来的angle是计算了Twirl事件的



读完这篇文档，请你用通俗但专业的语言解释这篇文档，然后我再告诉你具体步骤。

// 暂时忽略以下部分
## 变速机制
球的默认旋转速度是 每秒(adofaiFile.settings.bpm)/120圈。
如果踩到带有变速事件(SetSpeed)的砖块(请使用adofai库的函数，详细用法请查看node modules里的d.ts)，